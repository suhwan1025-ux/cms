# ğŸ”’ íì‡„ë§ ì´ê´€ ì²´í¬ë¦¬ìŠ¤íŠ¸

**ì‘ì„±ì¼**: 2025-11-05  
**ëŒ€ìƒ**: íì‡„ë§ í™˜ê²½ ì´ê´€ ë‹´ë‹¹ì  
**ëª©ì **: ì¸í„°ë„· ì—°ê²° ì—†ëŠ” íì‡„ë§ í™˜ê²½ìœ¼ë¡œ ì•ˆì „í•˜ê²Œ ì´ê´€í•˜ê¸° ìœ„í•œ ì ê²€ ì‚¬í•­

---

## ğŸ“‹ ëª©ì°¨

1. [ì ê²€ ê²°ê³¼ ìš”ì•½](#ì ê²€-ê²°ê³¼-ìš”ì•½)
2. [í•˜ë“œì½”ë”©ëœ ì£¼ì†Œ ëª©ë¡](#í•˜ë“œì½”ë”©ëœ-ì£¼ì†Œ-ëª©ë¡)
3. [í™˜ê²½ ì„¤ì • íŒŒì¼](#í™˜ê²½-ì„¤ì •-íŒŒì¼)
4. [ì™¸ë¶€ ì˜ì¡´ì„±](#ì™¸ë¶€-ì˜ì¡´ì„±)
5. [ìˆ˜ì •ì´ í•„ìš”í•œ íŒŒì¼](#ìˆ˜ì •ì´-í•„ìš”í•œ-íŒŒì¼)
6. [ì´ê´€ ì „ ì¤€ë¹„ì‚¬í•­](#ì´ê´€-ì „-ì¤€ë¹„ì‚¬í•­)
7. [ì´ê´€ í›„ ì„¤ì • ì‘ì—…](#ì´ê´€-í›„-ì„¤ì •-ì‘ì—…)
8. [ê²€ì¦ ë°©ë²•](#ê²€ì¦-ë°©ë²•)

---

## ì ê²€ ê²°ê³¼ ìš”ì•½

### âœ… ì–‘í˜¸í•œ ë¶€ë¶„
- ëŒ€ë¶€ë¶„ì˜ API í˜¸ì¶œì´ í™˜ê²½ë³€ìˆ˜(`process.env.REACT_APP_API_URL`)ë¥¼ ì‚¬ìš©
- ì™¸ë¶€ CDN ì˜ì¡´ì„± ì—†ìŒ (ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ node_modulesì— í¬í•¨)
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •ì´ í™˜ê²½ë³€ìˆ˜ ê¸°ë°˜

### âš ï¸ ì£¼ì˜ í•„ìš”
- **package.jsonì˜ proxy ì„¤ì •**: íŠ¹ì • IP í•˜ë“œì½”ë”© (`http://172.22.32.200:3002`)
- **server.js**: ì½˜ì†” ì¶œë ¥ì— íŠ¹ì • IP í¬í•¨ (`172.22.32.200`)
- **AI ì„œë²„**: IP ì£¼ì†Œ í•˜ë“œì½”ë”© (`172.22.32.200`)
- ì¼ë¶€ í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ì— localhost í•˜ë“œì½”ë”©

### ğŸ”´ ë°˜ë“œì‹œ ìˆ˜ì • í•„ìš”
1. AI ì„œë²„ ì£¼ì†Œ ì„¤ì •
2. package.json proxy ì„¤ì •
3. í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ìƒì„± (.env)

---

## í•˜ë“œì½”ë”©ëœ ì£¼ì†Œ ëª©ë¡

### 1. package.json
**ìœ„ì¹˜**: `package.json:56`  
**í˜„ì¬ ê°’**: 
```json
"proxy": "http://172.22.32.200:3002"
```

**ë¬¸ì œì **: ê°œë°œ í™˜ê²½ì—ì„œì˜ í”„ë¡ì‹œ ì„¤ì •ì´ íŠ¹ì • IPë¡œ ê³ ì •ë¨  
**í•´ê²° ë°©ë²•**: 
```json
"proxy": "http://localhost:3002"
```
ë˜ëŠ” í™˜ê²½ë³€ìˆ˜ ì‚¬ìš© (ê¶Œì¥):
```json
"proxy": "${REACT_APP_API_URL}"
```

---

### 2. AI ì„œë²„ ì„¤ì •
**ìœ„ì¹˜**: `ai_server/env.example`

**í˜„ì¬ ê°’**:
```bash
DB_HOST=172.22.32.200
OLLAMA_BASE_URL=http://172.22.32.200:11434
```

**ë¬¸ì œì **: AI ì„œë²„ê°€ íŠ¹ì • IPì˜ Ollama ì„œë²„ì— ì˜ì¡´  
**í•´ê²° ë°©ë²•**: íì‡„ë§ ë‚´ë¶€ì˜ AI ì„œë²„ IPë¡œ ë³€ê²½ í•„ìš”

---

### 3. server.js ì½˜ì†” ì¶œë ¥
**ìœ„ì¹˜**: `server.js:4811-4812`

**í˜„ì¬ ê°’**:
```javascript
console.log(`ğŸŒ ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼: http://172.22.32.200:${PORT}`);
console.log(`ğŸ“± React ì•±: http://172.22.32.200:${PORT}`);
```

**ë¬¸ì œì **: ë‹¨ìˆœ ì •ë³´ ì¶œë ¥ì´ì§€ë§Œ í˜¼ë€ì„ ì¤„ ìˆ˜ ìˆìŒ  
**í•´ê²° ë°©ë²•**: ë™ì ìœ¼ë¡œ ì„œë²„ IPë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ í™˜ê²½ë³€ìˆ˜ ì‚¬ìš©

---

### 4. API ê¸°ë³¸ URL
**ìœ„ì¹˜**: 
- `src/config/api.js:4`
- `src/components/PersonnelManagement.js:4`
- `src/components/ExternalPersonnelManagement.js:4`

**í˜„ì¬ ê°’**:
```javascript
const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3002';
```

**ìƒíƒœ**: âœ… í™˜ê²½ë³€ìˆ˜ ê¸°ë°˜ìœ¼ë¡œ ì–‘í˜¸  
**íì‡„ë§ ì„¤ì •**: `.env` íŒŒì¼ì— `REACT_APP_API_URL` ì„¤ì • í•„ìš”

---

### 5. í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ (ì˜í–¥ ì—†ìŒ)
**ìœ„ì¹˜**: `scripts/test/` ë””ë ‰í† ë¦¬

ë‹¤ìŒ íŒŒì¼ë“¤ì— localhost í•˜ë“œì½”ë”©:
- `test-texttosql-ai.js`
- `test-rag-simple.js`
- `test-ai-response.js`
- `test-all-types.js`

**ë¬¸ì œì **: ê°œë°œ/í…ŒìŠ¤íŠ¸ìš© ìŠ¤í¬ë¦½íŠ¸ë¡œ ìš´ì˜ì— ì˜í–¥ ì—†ìŒ  
**ì¡°ì¹˜**: í•„ìš”ì‹œ ì‚­ì œ ë˜ëŠ” ë¬´ì‹œ

---

## í™˜ê²½ ì„¤ì • íŒŒì¼

### í•„ìˆ˜ ìƒì„± íŒŒì¼

#### 1. `.env` (í”„ë¡ íŠ¸ì—”ë“œ React ì•±ìš©)

**ìœ„ì¹˜**: í”„ë¡œì íŠ¸ ë£¨íŠ¸ (D:\CMS_NEW\.env)

```bash
# API ì„œë²„ ì£¼ì†Œ (íì‡„ë§ ë‚´ë¶€ IPë¡œ ë³€ê²½)
REACT_APP_API_URL=http://[íì‡„ë§_ì„œë²„_IP]:3002

# ì„ íƒì‚¬í•­
REACT_APP_ENV=production
```

**ì£¼ì˜**: 
- `REACT_APP_` ì ‘ë‘ì‚¬ í•„ìˆ˜ (React í™˜ê²½ë³€ìˆ˜ ê·œì¹™)
- ë¹Œë“œ ì‹œì ì— í•˜ë“œì½”ë”©ë˜ë¯€ë¡œ IP ë³€ê²½ ì‹œ ì¬ë¹Œë“œ í•„ìš”

---

#### 2. `.env` (ë°±ì—”ë“œ ì„œë²„ìš©) - ì´ë¯¸ ì¡´ì¬

**ìœ„ì¹˜**: í”„ë¡œì íŠ¸ ë£¨íŠ¸

```bash
# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • (íì‡„ë§ DB ì„œë²„)
DB_HOST=[íì‡„ë§_DB_IP]
DB_PORT=5432
DB_NAME=contract_management
DB_USERNAME=cms_admin
DB_PASSWORD=[ì•ˆì „í•œ_ë¹„ë°€ë²ˆí˜¸]

# Node í™˜ê²½
NODE_ENV=production

# ì„œë²„ í¬íŠ¸
PORT=3002

# AI ì„œë²„ URL (ì˜µì…˜)
AI_SERVER_URL=http://[íì‡„ë§_AI_ì„œë²„_IP]:8000

# CORS ì„¤ì • (í”„ë¡ íŠ¸ì—”ë“œ ì£¼ì†Œ)
CORS_ORIGIN=http://[íì‡„ë§_ì„œë²„_IP]:3001
```

---

#### 3. `ai_server/env.config` (AI ì„œë²„ìš©)

**ìœ„ì¹˜**: ai_server/env.config

```bash
# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
DB_HOST=[íì‡„ë§_DB_IP]
DB_PORT=5432
DB_NAME=contract_management
DB_USER=cms_admin
DB_PASSWORD=[ì•ˆì „í•œ_ë¹„ë°€ë²ˆí˜¸]

# Ollama ì„¤ì • (AI ëª¨ë¸ ì„œë²„)
OLLAMA_BASE_URL=http://[íì‡„ë§_OLLAMA_IP]:11434
LLM_MODEL=llama3.1:8b
EMBEDDING_MODEL=nomic-embed-text

# AI ì„œë²„ ì„¤ì •
AI_SERVER_PORT=8000
AI_SERVER_HOST=0.0.0.0
```

**ì¤‘ìš”**: 
- Ollama ì„œë²„ê°€ íì‡„ë§ ë‚´ì—ì„œ ì‹¤í–‰ë˜ê³  ìˆì–´ì•¼ í•¨
- ëª¨ë¸ íŒŒì¼(`llama3.1:8b`, `nomic-embed-text`)ì´ ë¯¸ë¦¬ ë‹¤ìš´ë¡œë“œë˜ì–´ ìˆì–´ì•¼ í•¨

---

## ì™¸ë¶€ ì˜ì¡´ì„±

### âœ… ì¸í„°ë„· ì—°ê²° ë¶ˆí•„ìš” í•­ëª©

#### 1. NPM íŒ¨í‚¤ì§€
**ìƒíƒœ**: ëª¨ë“  ì˜ì¡´ì„±ì´ `node_modules`ì— í¬í•¨ë¨  
**í™•ì¸ ë°©ë²•**:
```bash
ls node_modules | wc -l  # ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ ìˆ˜ í™•ì¸
```

**ì£¼ì˜ì‚¬í•­**: 
- íì‡„ë§ ì´ê´€ ì „ì— `npm install` ì™„ë£Œ í•„ìˆ˜
- `node_modules` í´ë” ì „ì²´ë¥¼ ì´ê´€

---

#### 2. CKEditor ë¼ì´ì„ ìŠ¤
**ìœ„ì¹˜**: `src/ckeditor/CustomEditor.js`

**ë°œê²¬ í•­ëª©**:
```javascript
// https://ckeditor.com/legal/ckeditor-oss-license
```

**ìƒíƒœ**: âœ… ë‹¨ìˆœ ì£¼ì„, ì‹¤ì œ ì™¸ë¶€ ì—°ê²° ì—†ìŒ  
**ì¡°ì¹˜**: ë¶ˆí•„ìš”

---

#### 3. í°íŠ¸ ë° CSS
**ìƒíƒœ**: âœ… ëª¨ë“  ìŠ¤íƒ€ì¼ì´ ë¡œì»¬ íŒŒì¼  
**í™•ì¸**: CDN ë§í¬ ì—†ìŒ

---

### âš ï¸ ì„ íƒì  ì˜ì¡´ì„± (AI ê¸°ëŠ¥ìš©)

#### Ollama AI ëª¨ë¸ ì„œë²„
**í•„ìš” ì¡°ê±´**: 
- Ollama ì„œë²„ê°€ íì‡„ë§ ë‚´ì—ì„œ ì‹¤í–‰ ì¤‘ì´ì–´ì•¼ í•¨
- í•„ìš”í•œ ëª¨ë¸ íŒŒì¼ì´ ì‚¬ì „ ë‹¤ìš´ë¡œë“œë˜ì–´ ìˆì–´ì•¼ í•¨

**ëª¨ë¸ ë‹¤ìš´ë¡œë“œ** (ì´ê´€ ì „ ì¸í„°ë„· í™˜ê²½ì—ì„œ):
```bash
# Ollama ì„¤ì¹˜ í›„
ollama pull llama3.1:8b
ollama pull nomic-embed-text
```

**ëª¨ë¸ íŒŒì¼ ìœ„ì¹˜** (ë°±ì—… í•„ìš”):
- Windows: `C:\Users\[ì‚¬ìš©ì]\.ollama\models`
- Linux: `~/.ollama/models`

**íì‡„ë§ ì„¤ì¹˜ ë°©ë²•**:
1. ì¸í„°ë„· í™˜ê²½ì—ì„œ ëª¨ë¸ ë‹¤ìš´ë¡œë“œ
2. `.ollama/models` í´ë” ì „ì²´ ë°±ì—…
3. íì‡„ë§ ì„œë²„ì˜ ë™ì¼ ìœ„ì¹˜ì— ë³µì‚¬
4. Ollama ì„œë¹„ìŠ¤ ì‹œì‘

---

## ìˆ˜ì •ì´ í•„ìš”í•œ íŒŒì¼

### í•„ìˆ˜ ìˆ˜ì •

#### 1. `package.json`
**ë¼ì¸ 56** ìˆ˜ì •:
```json
ë³€ê²½ ì „: "proxy": "http://172.22.32.200:3002"
ë³€ê²½ í›„: "proxy": "http://localhost:3002"
```

**ë˜ëŠ”** í”„ë¡ì‹œ ì„¤ì • ì œê±°í•˜ê³  API_BASE_URLë§Œ ì‚¬ìš© (ê¶Œì¥)

---

#### 2. `ai_server/env.config` ìƒì„±
`ai_server/env.example` ë³µì‚¬í•˜ì—¬ ìƒì„±:
```bash
cp ai_server/env.example ai_server/env.config
```

ê·¸ í›„ ë‚´ìš© ìˆ˜ì •:
- `DB_HOST`: íì‡„ë§ DB ì„œë²„ IP
- `OLLAMA_BASE_URL`: íì‡„ë§ Ollama ì„œë²„ IP
- `DB_PASSWORD`: ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸

---

#### 3. ë£¨íŠ¸ `.env` íŒŒì¼ ìƒì„±
```bash
# env.exampleì„ ë³µì‚¬
cp env.example .env

# ë‚´ìš© ìˆ˜ì •
vi .env
```

í•„ìˆ˜ ì„¤ì •:
```bash
DB_HOST=[íì‡„ë§_DB_IP]
DB_PASSWORD=[ì‹¤ì œ_ë¹„ë°€ë²ˆí˜¸]
AI_SERVER_URL=http://[íì‡„ë§_AI_IP]:8000
```

---

#### 4. `.env` íŒŒì¼ (React ì•±ìš©) ìƒì„±
í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env` ìƒì„±:
```bash
REACT_APP_API_URL=http://[íì‡„ë§_ì„œë²„_IP]:3002
```

---

### ì„ íƒì  ìˆ˜ì •

#### `server.js` ì½˜ì†” ì¶œë ¥ (ë¼ì¸ 4811-4812)
íŠ¹ì • IP í•˜ë“œì½”ë”©ì„ ë™ì  IPë¡œ ë³€ê²½:

```javascript
// ë³€ê²½ ì „
console.log(`ğŸŒ ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼: http://172.22.32.200:${PORT}`);

// ë³€ê²½ í›„
const networkIP = Object.values(require('os').networkInterfaces())
  .flat()
  .find(i => i.family === 'IPv4' && !i.internal)?.address || 'localhost';
console.log(`ğŸŒ ë„¤íŠ¸ì›Œí¬ ì ‘ê·¼: http://${networkIP}:${PORT}`);
```

---

## ì´ê´€ ì „ ì¤€ë¹„ì‚¬í•­

### ì²´í¬ë¦¬ìŠ¤íŠ¸

#### 1. ì†ŒìŠ¤ì½”ë“œ ì¤€ë¹„
- [ ] ì „ì²´ í”„ë¡œì íŠ¸ í´ë” ë°±ì—…
- [ ] `node_modules` í´ë” í¬í•¨ (ë˜ëŠ” íì‡„ë§ì—ì„œ ì¬ì„¤ì¹˜ ê°€ëŠ¥í•˜ë©´ ì œì™¸)
- [ ] `.git` í´ë” í¬í•¨ (ë²„ì „ ê´€ë¦¬ í•„ìš” ì‹œ)

#### 2. ë°ì´í„°ë² ì´ìŠ¤ ì¤€ë¹„
- [ ] PostgreSQL ì„¤ì¹˜ íŒŒì¼ (ë²„ì „ 12 ì´ìƒ)
- [ ] `sql/dba_setup/` í´ë” ì „ì²´
- [ ] ê¸°ì¡´ ë°ì´í„° ë°±ì—… (ìˆëŠ” ê²½ìš°)

#### 3. í™˜ê²½ ì„¤ì • íŒŒì¼ ì¤€ë¹„
- [ ] `.env` íŒŒì¼ í…œí”Œë¦¿ ì¤€ë¹„
- [ ] `ai_server/env.config` í…œí”Œë¦¿ ì¤€ë¹„
- [ ] `env.production` íŒŒì¼ ê²€í† 

#### 4. AI ëª¨ë¸ íŒŒì¼ (AI ê¸°ëŠ¥ ì‚¬ìš© ì‹œ)
- [ ] Ollama ì„¤ì¹˜ íŒŒì¼
- [ ] `llama3.1:8b` ëª¨ë¸ íŒŒì¼ ë°±ì—…
- [ ] `nomic-embed-text` ëª¨ë¸ íŒŒì¼ ë°±ì—…
- [ ] `.ollama/models` í´ë” ì „ì²´ ë°±ì—…

#### 5. ë¬¸ì„œ ì¤€ë¹„
- [ ] `docs/DBA_DATABASE_SETUP_GUIDE.md`
- [ ] `docs/DEPLOYMENT_GUIDE.md`
- [ ] `sql/dba_setup/README.md`
- [ ] ë³¸ ë¬¸ì„œ (`CLOSED_NETWORK_MIGRATION_CHECKLIST.md`)

#### 6. Node.js ë° ë„êµ¬
- [ ] Node.js ì„¤ì¹˜ íŒŒì¼ (v18 ì´ìƒ)
- [ ] npm ë˜ëŠ” yarn
- [ ] Git (ì„ íƒì‚¬í•­)

---

## ì´ê´€ í›„ ì„¤ì • ì‘ì—…

### 1ë‹¨ê³„: ê¸°ë³¸ ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ì¹˜

```bash
# 1. Node.js ì„¤ì¹˜ (v18 ì´ìƒ)
# Windows: node-v18.x.x-x64.msi ì‹¤í–‰
# Linux: íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¡œ ì„¤ì¹˜

# 2. PostgreSQL ì„¤ì¹˜
# sql/dba_setup/ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (DBA_DATABASE_SETUP_GUIDE.md ì°¸ì¡°)

# 3. Ollama ì„¤ì¹˜ (AI ê¸°ëŠ¥ ì‚¬ìš© ì‹œ)
# Ollama ì„¤ì¹˜ íŒŒì¼ ì‹¤í–‰
```

---

### 2ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¶•

```bash
cd sql/dba_setup

# ì „ì²´ ì„¤ì¹˜
psql -U postgres -f 00_run_all.sql

# ë˜ëŠ” ë‹¨ê³„ë³„ ì„¤ì¹˜
psql -U postgres -f 01_create_database.sql
psql -U cms_admin -d contract_management -f 02_create_tables.sql
# ... (ë‚˜ë¨¸ì§€ ìŠ¤í¬ë¦½íŠ¸)
```

---

### 3ë‹¨ê³„: í™˜ê²½ ì„¤ì •

#### í”„ë¡ íŠ¸ì—”ë“œ/ë°±ì—”ë“œ
```bash
cd D:\CMS_NEW  # ë˜ëŠ” ì´ê´€ëœ ê²½ë¡œ

# .env íŒŒì¼ ìƒì„± ë° ìˆ˜ì •
cp env.example .env
vi .env  # íì‡„ë§ í™˜ê²½ì— ë§ê²Œ ìˆ˜ì •

# React ì•±ìš© í™˜ê²½ë³€ìˆ˜ ì„¤ì •
echo "REACT_APP_API_URL=http://[íì‡„ë§_IP]:3002" > .env
```

#### AI ì„œë²„
```bash
cd ai_server

# env.config ìƒì„± ë° ìˆ˜ì •
cp env.example env.config
vi env.config

# ëª¨ë¸ íŒŒì¼ ë³µì‚¬ (ë°±ì—…í•œ .ollama/models í´ë”)
```

---

### 4ë‹¨ê³„: package.json ìˆ˜ì •
```bash
vi package.json

# ë¼ì¸ 56 ìˆ˜ì •
# "proxy": "http://172.22.32.200:3002" 
# â†’ "proxy": "http://localhost:3002"
```

---

### 5ë‹¨ê³„: ì˜ì¡´ì„± ì„¤ì¹˜

#### ë°©ë²• A: node_modules í¬í•¨í•œ ê²½ìš°
```bash
# ì„¤ì¹˜ ë¶ˆí•„ìš”, ë°”ë¡œ ë‹¤ìŒ ë‹¨ê³„ë¡œ
```

#### ë°©ë²• B: node_modules ì—†ì´ ì´ê´€í•œ ê²½ìš°
```bash
# íì‡„ë§ ë‚´ npm ë ˆì§€ìŠ¤íŠ¸ë¦¬ê°€ ìˆëŠ” ê²½ìš°
npm install

# ì—†ëŠ” ê²½ìš°: ì¸í„°ë„· í™˜ê²½ì—ì„œ node_modulesë¥¼ ë¯¸ë¦¬ ë°±ì—…í•´ì•¼ í•¨
```

---

### 6ë‹¨ê³„: ë¹Œë“œ ë° ì‹¤í–‰

```bash
# 1. í”„ë¡œë•ì…˜ ë¹Œë“œ
npm run build:prod

# 2. ì„œë²„ ì‹œì‘
node server.js

# ë˜ëŠ” PM2 ì‚¬ìš© (ê¶Œì¥)
npm install -g pm2
pm2 start server.js --name cms-server
pm2 save
pm2 startup
```

---

### 7ë‹¨ê³„: AI ì„œë²„ ì‹œì‘ (ì„ íƒ)

```bash
cd ai_server

# Python ê°€ìƒí™˜ê²½ í™œì„±í™”
python -m venv venv
source venv/bin/activate  # Linux
# ë˜ëŠ”
venv\Scripts\activate     # Windows

# ì˜ì¡´ì„± ì„¤ì¹˜
pip install -r requirements.txt

# ì„œë²„ ì‹œì‘
python main.py

# ë˜ëŠ” ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
nohup python main.py &
```

---

## ê²€ì¦ ë°©ë²•

### 1. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
```bash
psql -U cms_admin -d contract_management

# í…Œì´ë¸” ìˆ˜ í™•ì¸
SELECT COUNT(*) FROM information_schema.tables 
WHERE table_schema = 'public';
-- ê²°ê³¼: 26~27ê°œ

\q
```

---

### 2. ë°±ì—”ë“œ API ì„œë²„ í™•ì¸
```bash
# ì„œë²„ ì‹¤í–‰ í™•ì¸
curl http://localhost:3002/api/health

# ë˜ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ
http://[íì‡„ë§_IP]:3002/api/health
```

---

### 3. í”„ë¡ íŠ¸ì—”ë“œ ì ‘ì† í™•ì¸
ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†:
```
http://[íì‡„ë§_IP]:3001
```

ì˜ˆìƒ ê²°ê³¼: ë¡œê·¸ì¸ í˜ì´ì§€ í‘œì‹œ

---

### 4. AI ì„œë²„ í™•ì¸ (AI ê¸°ëŠ¥ ì‚¬ìš© ì‹œ)
```bash
curl http://localhost:8000/health

# ë˜ëŠ”
curl -X POST http://localhost:8000/texttosql \
  -H "Content-Type: application/json" \
  -d '{"query":"í…ŒìŠ¤íŠ¸"}'
```

---

### 5. ì „ì²´ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

#### ê¸°ë³¸ ê¸°ëŠ¥
- [ ] ë¡œê·¸ì¸ (ì‚¬ìš©ì ì¸ì¦)
- [ ] í’ˆì˜ì„œ ëª©ë¡ ì¡°íšŒ
- [ ] í’ˆì˜ì„œ ì‘ì„±
- [ ] í’ˆì˜ì„œ ìˆ˜ì •
- [ ] í’ˆì˜ì„œ ì‚­ì œ
- [ ] íŒŒì¼ ì²¨ë¶€ (ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ)
- [ ] ê²°ì¬ í”„ë¡œì„¸ìŠ¤

#### ì˜ˆì‚° ê´€ë¦¬
- [ ] ì‚¬ì—…ì˜ˆì‚° ì¡°íšŒ
- [ ] ì‚¬ì—…ì˜ˆì‚° ë“±ë¡
- [ ] ì˜ˆì‚° ì§‘í–‰ í˜„í™© í™•ì¸

#### AI ê¸°ëŠ¥ (ì„ íƒ)
- [ ] ìì—°ì–´ ê²€ìƒ‰
- [ ] Text-to-SQL ë³€í™˜
- [ ] AI ì–´ì‹œìŠ¤í„´íŠ¸

---

## ë„¤íŠ¸ì›Œí¬ êµ¬ì„±

### ê¶Œì¥ ì•„í‚¤í…ì²˜

```
[íì‡„ë§ ë‚´ë¶€]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  í´ë¼ì´ì–¸íŠ¸ PC (ì›¹ ë¸Œë¼ìš°ì €)              â”‚
â”‚  http://[ì„œë²„IP]:3001                   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì›¹/API ì„œë²„ (Node.js)                   â”‚
â”‚  í¬íŠ¸ 3001 (React ì•±)                    â”‚
â”‚  í¬íŠ¸ 3002 (API ì„œë²„)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚
         â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL DB   â”‚  â”‚  AI ì„œë²„         â”‚
â”‚  í¬íŠ¸ 5432       â”‚  â”‚  í¬íŠ¸ 8000       â”‚
â”‚                  â”‚  â”‚  (+ Ollama)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Ollama ì„œë²„     â”‚
                      â”‚  í¬íŠ¸ 11434      â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í•„ìš”í•œ í¬íŠ¸

| ì„œë¹„ìŠ¤ | í¬íŠ¸ | ìš©ë„ |
|--------|------|------|
| React ì•± | 3001 | ì›¹ UI |
| Node.js API | 3002 | REST API |
| PostgreSQL | 5432 | ë°ì´í„°ë² ì´ìŠ¤ |
| AI ì„œë²„ | 8000 | AI ê¸°ëŠ¥ (ì„ íƒ) |
| Ollama | 11434 | AI ëª¨ë¸ (ì„ íƒ) |

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: "Cannot find module" ì˜¤ë¥˜
**ì›ì¸**: node_modules ëˆ„ë½  
**í•´ê²°**:
```bash
npm install
# ë˜ëŠ” ë°±ì—…í•œ node_modules ë³µì‚¬
```

---

### ë¬¸ì œ 2: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨
**ì›ì¸**: DB ì„¤ì • ì˜¤ë¥˜  
**í•´ê²°**:
```bash
# .env íŒŒì¼ í™•ì¸
cat .env

# PostgreSQL ì„œë¹„ìŠ¤ í™•ì¸
systemctl status postgresql-14  # Linux
Get-Service postgresql-x64-14   # Windows

# ë°©í™”ë²½ í™•ì¸
telnet [DB_IP] 5432
```

---

### ë¬¸ì œ 3: AI ê¸°ëŠ¥ ì˜¤ë¥˜
**ì›ì¸**: Ollama ì„œë²„ ë¯¸ì‹¤í–‰ ë˜ëŠ” ëª¨ë¸ ëˆ„ë½  
**í•´ê²°**:
```bash
# Ollama ì„œë¹„ìŠ¤ í™•ì¸
curl http://localhost:11434

# ëª¨ë¸ í™•ì¸
ollama list

# ëª¨ë¸ ì¬ë‹¤ìš´ë¡œë“œ (ë¶ˆê°€ëŠ¥í•˜ë©´ ëª¨ë¸ íŒŒì¼ ë³µì‚¬)
```

---

### ë¬¸ì œ 4: ë¹Œë“œëœ React ì•±ì´ API ì„œë²„ë¥¼ ì°¾ì§€ ëª»í•¨
**ì›ì¸**: REACT_APP_API_URLì´ ë¹Œë“œ ì‹œì ì— ì˜ëª» ì„¤ì •ë¨  
**í•´ê²°**:
```bash
# .env íŒŒì¼ ìˆ˜ì •
echo "REACT_APP_API_URL=http://[ì˜¬ë°”ë¥¸_IP]:3002" > .env

# ì¬ë¹Œë“œ
npm run build:prod
```

---

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### 1. ë¹„ë°€ë²ˆí˜¸ ê´€ë¦¬
- [ ] ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- [ ] ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš© (12ì ì´ìƒ, ì˜ë¬¸+ìˆ«ì+íŠ¹ìˆ˜ë¬¸ì)
- [ ] `.env` íŒŒì¼ ê¶Œí•œ ì„¤ì • (`chmod 600 .env`)

### 2. ë°ì´í„°ë² ì´ìŠ¤ ë³´ì•ˆ
- [ ] PostgreSQL ì‚¬ìš©ìë³„ ê¶Œí•œ ìµœì†Œí™”
- [ ] pg_hba.confì—ì„œ IP ê¸°ë°˜ ì ‘ê·¼ ì œì–´
- [ ] SSL ì—°ê²° í™œì„±í™” (í•„ìš”ì‹œ)

### 3. ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ
- [ ] ë°©í™”ë²½ ê·œì¹™ ì„¤ì •
- [ ] ë¶ˆí•„ìš”í•œ í¬íŠ¸ ì°¨ë‹¨
- [ ] ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ë§Œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •

---

## ë°±ì—… ì „ëµ

### ì •ê¸° ë°±ì—… í•­ëª©
1. **ë°ì´í„°ë² ì´ìŠ¤**
   ```bash
   pg_dump -U cms_admin contract_management > backup_$(date +%Y%m%d).sql
   ```

2. **ì—…ë¡œë“œ íŒŒì¼** (ìˆëŠ” ê²½ìš°)
   ```bash
   tar -czf uploads_$(date +%Y%m%d).tar.gz uploads/
   ```

3. **í™˜ê²½ ì„¤ì •**
   ```bash
   cp .env .env.backup
   cp ai_server/env.config ai_server/env.config.backup
   ```

---

## ì—°ë½ì²˜ ë° ì§€ì›

ë¬¸ì œ ë°œìƒ ì‹œ í™•ì¸í•  ë¡œê·¸:
- Node.js ì„œë²„: `pm2 logs cms-server`
- AI ì„œë²„: `ai_server/logs/`
- PostgreSQL: `/var/log/postgresql/`

---

**ë¬¸ì„œ ë²„ì „**: 1.0  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-11-05  
**ë‹¤ìŒ ë¦¬ë·° ì˜ˆì •**: ì´ê´€ ì™„ë£Œ í›„


